{"ast":null,"code":"var _jsxFileName = \"/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport '../styles/Home.css';\nimport MyRoutines from \"./MyRoutines\";\nimport MySessions from \"./MySessions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Home = _ref => {\n  _s();\n\n  let {\n    API_URL\n  } = _ref;\n  const [petitions, setPetitions] = useState([]);\n  const [user, setUser] = useState({});\n  const [dummy, setDummy] = useState(false);\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted';\n    user.trainer = trainer;\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })).then(setTimeout(() => setDummy(!dummy), 500));\n  };\n\n  const declinePetition = async petition => {\n    petition.status = 'rejected';\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(setTimeout(() => setDummy(!dummy), 500));\n  };\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`).then(res => res.json()).then(data => {\n        setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'));\n      });\n    };\n\n    const getUser = async () => {\n      await fetch(`${API_URL}/users`).then(res => res.json()).then(data => {\n        data.map(user => {\n          if (user.id == localStorage.getItem('id')) {\n            setUser(user);\n          }\n        });\n      });\n    };\n\n    getPetitions();\n    getUser();\n  }, [API_URL, dummy]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: petitions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pending-petitions\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Peticiones pendientes\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), petitions.map((petition, i) => {\n          return /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"adjacent\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [petition.senderName, /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"d-block small\",\n                children: petition.senderUserName\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"petitions-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"petition-action reject-petition-button\",\n                onClick: () => declinePetition(petition),\n                children: \"Rechazar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 27\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"petition-action accept-petition-button\",\n                onClick: () => acceptPetition(petition, petition.sender),\n                children: \"Aceptar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 27\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 25\n            }, this)]\n          }, petition.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 23\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"customer-activity\",\n        children: [/*#__PURE__*/_jsxDEV(MySessions, {\n          API_URL: API_URL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(MyRoutines, {\n          API_URL: API_URL\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"j2rmgA/8PZj4INvA5fS9/wCbvPU=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useState","useEffect","MyRoutines","MySessions","Home","API_URL","petitions","setPetitions","user","setUser","dummy","setDummy","acceptPetition","petition","trainer","status","fetch","id","method","headers","body","JSON","stringify","then","localStorage","getItem","setTimeout","declinePetition","getPetitions","res","json","data","filter","f","receiver","getUser","map","length","i","senderName","senderUserName","sender"],"sources":["/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport '../styles/Home.css'\nimport MyRoutines from \"./MyRoutines\"\nimport MySessions from \"./MySessions\"\n\nconst Home = ({API_URL}) => {\n  const [petitions, setPetitions] = useState([])\n  const [user, setUser] = useState({})\n  const [dummy, setDummy] = useState(false)\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted'\n    user.trainer = trainer\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(\n      fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n        method: 'PUT',\n        headers: {\n          'Content-type' : 'application/json'\n        },\n        body: JSON.stringify(user)\n      })\n    )\n    .then(\n      setTimeout(() => setDummy(!dummy), 500)\n    )\n  }\n\n  const declinePetition = async (petition) => {\n    petition.status = 'rejected'\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(\n      setTimeout(() => setDummy(!dummy), 500)\n    )\n  }\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`)\n            .then(res => res.json())\n            .then(data => {\n              setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'))\n            })\n    }\n  \n    const getUser = async () => {\n      await fetch(`${API_URL}/users`)\n            .then(res => res.json())\n            .then(data => {\n              data.map(user => {\n                if(user.id == localStorage.getItem('id')) {\n                  setUser(user)\n                }\n              })\n            })\n    }\n\n    getPetitions()\n    getUser()\n  }, [API_URL, dummy])\n\n  return (\n    <div>\n      {petitions.length > 0 ? (\n        <div>\n          <div className=\"pending-petitions\">\n            <h2>Peticiones pendientes</h2>\n            {petitions.map((petition, i) => {\n              return  <label key={petition.id} className=\"adjacent\" >\n                        <div className=\"\">\n                          {petition.senderName}\n                          <span className=\"d-block small\">\n                            {petition.senderUserName} \n                          </span>\n                        </div>\n                        <div className='petitions-actions'>\n                          <button className=\"petition-action reject-petition-button\" onClick={() => declinePetition(petition)}>\n                            Rechazar\n                          </button>\n\n                          <button className=\"petition-action accept-petition-button\" onClick={() => acceptPetition(petition, petition.sender)}>\n                            Aceptar\n                          </button>\n                        </div>\n                      </label>\n            })}\n          </div>\n\n          <div className=\"customer-activity\">\n            <MySessions API_URL={API_URL} />\n\n            <MyRoutines API_URL={API_URL} />\n          </div>\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n  )\n}\n\nexport default Home"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAO,oBAAP;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,UAAP,MAAuB,cAAvB;;;;AAEA,MAAMC,IAAI,GAAG,QAAe;EAAA;;EAAA,IAAd;IAACC;EAAD,CAAc;EAC1B,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BP,QAAQ,CAAC,EAAD,CAA1C;EACA,MAAM,CAACQ,IAAD,EAAOC,OAAP,IAAkBT,QAAQ,CAAC,EAAD,CAAhC;EACA,MAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,KAAD,CAAlC;;EAEA,MAAMY,cAAc,GAAG,OAAOC,QAAP,EAAiBC,OAAjB,KAA6B;IAClDD,QAAQ,CAACE,MAAT,GAAkB,UAAlB;IACAP,IAAI,CAACM,OAAL,GAAeA,OAAf;IAEA,MAAME,KAAK,CAAE,GAAEX,OAAQ,cAAaQ,QAAQ,CAACI,EAAG,EAArC,EAAwC;MACjDC,MAAM,EAAE,KADyC;MAEjDC,OAAO,EAAE;QACP,gBAAiB;MADV,CAFwC;MAKjDC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,QAAf;IAL2C,CAAxC,CAAL,CAOLU,IAPK,CAQJP,KAAK,CAAE,GAAEX,OAAQ,UAASmB,YAAY,CAACC,OAAb,CAAqB,IAArB,CAA2B,EAAhD,EAAmD;MACtDP,MAAM,EAAE,KAD8C;MAEtDC,OAAO,EAAE;QACP,gBAAiB;MADV,CAF6C;MAKtDC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAed,IAAf;IALgD,CAAnD,CARD,EAgBLe,IAhBK,CAiBJG,UAAU,CAAC,MAAMf,QAAQ,CAAC,CAACD,KAAF,CAAf,EAAyB,GAAzB,CAjBN,CAAN;EAmBD,CAvBD;;EAyBA,MAAMiB,eAAe,GAAG,MAAOd,QAAP,IAAoB;IAC1CA,QAAQ,CAACE,MAAT,GAAkB,UAAlB;IAEA,MAAMC,KAAK,CAAE,GAAEX,OAAQ,cAAaQ,QAAQ,CAACI,EAAG,EAArC,EAAwC;MACjDC,MAAM,EAAE,KADyC;MAEjDC,OAAO,EAAE;QACP,gBAAiB;MADV,CAFwC;MAKjDC,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeT,QAAf;IAL2C,CAAxC,CAAL,CAOLU,IAPK,CAQJG,UAAU,CAAC,MAAMf,QAAQ,CAAC,CAACD,KAAF,CAAf,EAAyB,GAAzB,CARN,CAAN;EAUD,CAbD;;EAeAT,SAAS,CAAC,MAAM;IACd,MAAM2B,YAAY,GAAG,YAAY;MAC/B,MAAMZ,KAAK,CAAE,GAAEX,OAAQ,YAAZ,CAAL,CACCkB,IADD,CACMM,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECP,IAFD,CAEMQ,IAAI,IAAI;QACZxB,YAAY,CAACwB,IAAI,CAACC,MAAL,CAAYC,CAAC,IAAIA,CAAC,CAACC,QAAF,IAAcV,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAd,IAA4CQ,CAAC,CAAClB,MAAF,IAAY,SAAzE,CAAD,CAAZ;MACD,CAJD,CAAN;IAKD,CAND;;IAQA,MAAMoB,OAAO,GAAG,YAAY;MAC1B,MAAMnB,KAAK,CAAE,GAAEX,OAAQ,QAAZ,CAAL,CACCkB,IADD,CACMM,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECP,IAFD,CAEMQ,IAAI,IAAI;QACZA,IAAI,CAACK,GAAL,CAAS5B,IAAI,IAAI;UACf,IAAGA,IAAI,CAACS,EAAL,IAAWO,YAAY,CAACC,OAAb,CAAqB,IAArB,CAAd,EAA0C;YACxChB,OAAO,CAACD,IAAD,CAAP;UACD;QACF,CAJD;MAKD,CARD,CAAN;IASD,CAVD;;IAYAoB,YAAY;IACZO,OAAO;EACR,CAvBQ,EAuBN,CAAC9B,OAAD,EAAUK,KAAV,CAvBM,CAAT;EAyBA,oBACE;IAAA,UACGJ,SAAS,CAAC+B,MAAV,GAAmB,CAAnB,gBACC;MAAA,wBACE;QAAK,SAAS,EAAC,mBAAf;QAAA,wBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,EAEG/B,SAAS,CAAC8B,GAAV,CAAc,CAACvB,QAAD,EAAWyB,CAAX,KAAiB;UAC9B,oBAAQ;YAAyB,SAAS,EAAC,UAAnC;YAAA,wBACE;cAAK,SAAS,EAAC,EAAf;cAAA,WACGzB,QAAQ,CAAC0B,UADZ,eAEE;gBAAM,SAAS,EAAC,eAAhB;gBAAA,UACG1B,QAAQ,CAAC2B;cADZ;gBAAA;gBAAA;gBAAA;cAAA,QAFF;YAAA;cAAA;cAAA;cAAA;YAAA,QADF,eAOE;cAAK,SAAS,EAAC,mBAAf;cAAA,wBACE;gBAAQ,SAAS,EAAC,wCAAlB;gBAA2D,OAAO,EAAE,MAAMb,eAAe,CAACd,QAAD,CAAzF;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QADF,eAKE;gBAAQ,SAAS,EAAC,wCAAlB;gBAA2D,OAAO,EAAE,MAAMD,cAAc,CAACC,QAAD,EAAWA,QAAQ,CAAC4B,MAApB,CAAxF;gBAAA;cAAA;gBAAA;gBAAA;gBAAA;cAAA,QALF;YAAA;cAAA;cAAA;cAAA;YAAA,QAPF;UAAA,GAAY5B,QAAQ,CAACI,EAArB;YAAA;YAAA;YAAA;UAAA,QAAR;QAiBD,CAlBA,CAFH;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAwBE;QAAK,SAAS,EAAC,mBAAf;QAAA,wBACE,QAAC,UAAD;UAAY,OAAO,EAAEZ;QAArB;UAAA;UAAA;UAAA;QAAA,QADF,eAGE,QAAC,UAAD;UAAY,OAAO,EAAEA;QAArB;UAAA;UAAA;UAAA;QAAA,QAHF;MAAA;QAAA;QAAA;QAAA;MAAA,QAxBF;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,gBAgCC;EAjCJ;IAAA;IAAA;IAAA;EAAA,QADF;AAsCD,CA5GD;;GAAMD,I;;KAAAA,I;AA8GN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}
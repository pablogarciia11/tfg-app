{"ast":null,"code":"var _jsxFileName = \"/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Home = _ref => {\n  _s();\n\n  let {\n    API_URL\n  } = _ref;\n  const [petitions, setPetitions] = useState([]);\n  const [user, setUser] = useState({});\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted';\n    user.trainer = trainer;\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    }));\n  };\n\n  const declinePetition = petitionId => {};\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`).then(res => res.json()).then(data => {\n        setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'));\n      });\n    };\n\n    const getUser = async () => {\n      await fetch(`${API_URL}/users`).then(res => res.json()).then(data => {\n        data.map(user => {\n          if (user.id == localStorage.getItem('id')) {\n            setUser(user);\n          }\n        });\n      });\n    };\n\n    getPetitions();\n    getUser();\n  }, [API_URL]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: petitions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Peticiones pendientes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this), petitions.map((petition, i) => {\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"adjacent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [petition.senderName, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"d-block small\",\n              children: petition.senderUserName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => acceptPetition(petition, i, petition.sender),\n              children: \"Aceptar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 72,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => declinePetition(petition.id),\n              children: \"Rechazar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 23\n          }, this)]\n        }, petition.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 21\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"CRPgWrEjtHZPtoguNj1TLkeH5m8=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useState","useEffect","Home","API_URL","petitions","setPetitions","user","setUser","acceptPetition","petition","trainer","status","fetch","id","method","headers","body","JSON","stringify","then","localStorage","getItem","declinePetition","petitionId","getPetitions","res","json","data","filter","f","receiver","getUser","map","length","i","senderName","senderUserName","sender"],"sources":["/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\"\n\nconst Home = ({API_URL}) => {\n  const [petitions, setPetitions] = useState([])\n  const [user, setUser] = useState({})\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted'\n    user.trainer = trainer\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'POST',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(\n      fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n        method: 'POST',\n        headers: {\n          'Content-type' : 'application/json'\n        },\n        body: JSON.stringify(user)\n      })\n    )\n  }\n\n  const declinePetition = (petitionId) => {\n    \n  }\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`)\n            .then(res => res.json())\n            .then(data => {\n              setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'))\n            })\n    }\n  \n    const getUser = async () => {\n      await fetch(`${API_URL}/users`)\n            .then(res => res.json())\n            .then(data => {\n              data.map(user => {\n                if(user.id == localStorage.getItem('id')) {\n                  setUser(user)\n                }\n              })\n            })\n    }\n\n    getPetitions()\n    getUser()\n  }, [API_URL])\n\n  return (\n    <div>\n      {petitions.length > 0 ? (\n        <div>\n          <h2>Peticiones pendientes</h2>\n          {petitions.map((petition, i) => {\n            return  <label key={petition.id} className=\"adjacent\" >\n                      <div className=\"\">\n                        {petition.senderName}\n                        <span className=\"d-block small\">\n                          {petition.senderUserName} \n                        </span>\n                      </div>\n                      <div className='actions'>\n                        <button className=\"petition-action\" onClick={() => acceptPetition(petition, i, petition.sender)}>\n                          Aceptar\n                        </button>\n\n                        <br />\n\n                        <button className=\"petition-action\" onClick={() => declinePetition(petition.id)}>\n                          Rechazar\n                        </button>\n                      </div>\n                    </label>\n          })}\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n  )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Home = _ref => {\n  _s();\n\n  let {\n    API_URL\n  } = _ref;\n  const [petitions, setPetitions] = useState([]);\n\n  const getPetitions = async () => {\n    await fetch(`${API_URL}/petitions`).then(res => res.json()).then(data => {\n      setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'));\n    });\n  };\n\n  const acceptPetition = async (petition, i, trainer) => {\n    petition.status = 'accepted';\n    console.log(petitions);\n    let updated = [...petitions];\n    petitions[i].status = 'accepted';\n    setPetitions(updated);\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'POST',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(res => res.json()).then(data => {\n      setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'));\n    });\n  };\n\n  const declinePetition = petitionId => {};\n\n  useEffect(() => {\n    getPetitions();\n  }, [API_URL]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: petitions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Peticiones pendientes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this), petitions.map((petition, i) => {\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"adjacent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [petition.senderName, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"d-block small\",\n              children: petition.senderUserName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => acceptPetition(petition, i, petition.sender),\n              children: \"Aceptar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => declinePetition(petition.id),\n              children: \"Rechazar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 23\n          }, this)]\n        }, petition.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"m4tEN45HgSOq0U6UX7eyh12D+e8=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useState","useEffect","Home","API_URL","petitions","setPetitions","getPetitions","fetch","then","res","json","data","filter","f","receiver","localStorage","getItem","status","acceptPetition","petition","i","trainer","console","log","updated","id","method","headers","body","JSON","stringify","declinePetition","petitionId","length","map","senderName","senderUserName","sender"],"sources":["/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\"\n\nconst Home = ({API_URL}) => {\n  const [petitions, setPetitions] = useState([])\n\n  const getPetitions = async () => {\n    await fetch(`${API_URL}/petitions`)\n          .then(res => res.json())\n          .then(data => {\n            setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'))\n          })\n  }\n\n  const acceptPetition = async (petition, i, trainer) => {\n    petition.status = 'accepted'\n\n    console.log(petitions)\n    let updated = [...petitions]\n    petitions[i].status = 'accepted'\n\n    setPetitions(updated)\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'POST',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(res => res.json())\n    .then(data => {\n      setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'))\n    })\n  }\n\n  const declinePetition = (petitionId) => {\n    \n  }\n\n  useEffect(() => {\n    getPetitions()\n  }, [API_URL])\n\n  return (\n    <div>\n      {petitions.length > 0 ? (\n        <div>\n          <h2>Peticiones pendientes</h2>\n          {petitions.map((petition, i) => {\n            return  <label key={petition.id} className=\"adjacent\" >\n                      <div className=\"\">\n                        {petition.senderName}\n                        <span className=\"d-block small\">\n                          {petition.senderUserName} \n                        </span>\n                      </div>\n                      <div className='actions'>\n                        <button className=\"petition-action\" onClick={() => acceptPetition(petition, i, petition.sender)}>\n                          Aceptar\n                        </button>\n\n                        <br />\n\n                        <button className=\"petition-action\" onClick={() => declinePetition(petition.id)}>\n                          Rechazar\n                        </button>\n                      </div>\n                    </label>\n          })}\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n  )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}
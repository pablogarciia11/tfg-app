{"ast":null,"code":"var _jsxFileName = \"/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport '../styles/Home.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Home = _ref => {\n  _s();\n\n  let {\n    API_URL\n  } = _ref;\n  const [petitions, setPetitions] = useState([]);\n  const [user, setUser] = useState({});\n  const [dummy, setDummy] = useState(false);\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted';\n    user.trainer = trainer;\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(user)\n    })).then(setDummy(!dummy));\n  };\n\n  const declinePetition = async petition => {\n    petition.status = 'rejected';\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type': 'application/json'\n      },\n      body: JSON.stringify(petition)\n    }).then(setDummy(!dummy));\n  };\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`).then(res => res.json()).then(data => {\n        setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'));\n      });\n    };\n\n    const getUser = async () => {\n      await fetch(`${API_URL}/users`).then(res => res.json()).then(data => {\n        data.map(user => {\n          if (user.id == localStorage.getItem('id')) {\n            setUser(user);\n          }\n        });\n      });\n    };\n\n    getPetitions();\n    getUser();\n  }, [API_URL, dummy]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: petitions.length > 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"pending-petitions\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Peticiones pendientes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), petitions.map((petition, i) => {\n        return /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"adjacent\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: [petition.senderName, /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"d-block small\",\n              children: petition.senderUserName\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"petitions-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => declinePetition(petition),\n              children: \"Rechazar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"petition-action\",\n              onClick: () => acceptPetition(petition, petition.sender),\n              children: \"Aceptar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 23\n          }, this)]\n        }, petition.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"j2rmgA/8PZj4INvA5fS9/wCbvPU=\");\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["useState","useEffect","Home","API_URL","petitions","setPetitions","user","setUser","dummy","setDummy","acceptPetition","petition","trainer","status","fetch","id","method","headers","body","JSON","stringify","then","localStorage","getItem","declinePetition","getPetitions","res","json","data","filter","f","receiver","getUser","map","length","i","senderName","senderUserName","sender"],"sources":["/Users/pablo/Desktop/TFG Definitivo/front/src/components/Home.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\"\nimport '../styles/Home.css'\n\nconst Home = ({API_URL}) => {\n  const [petitions, setPetitions] = useState([])\n  const [user, setUser] = useState({})\n  const [dummy, setDummy] = useState(false)\n\n  const acceptPetition = async (petition, trainer) => {\n    petition.status = 'accepted'\n    user.trainer = trainer\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(\n      fetch(`${API_URL}/users/${localStorage.getItem('id')}`, {\n        method: 'PUT',\n        headers: {\n          'Content-type' : 'application/json'\n        },\n        body: JSON.stringify(user)\n      })\n    )\n    .then(\n      setDummy(!dummy)\n    )\n  }\n\n  const declinePetition = async (petition) => {\n    petition.status = 'rejected'\n\n    await fetch(`${API_URL}/petitions/${petition.id}`, {\n      method: 'PUT',\n      headers: {\n        'Content-type' : 'application/json'\n      },\n      body: JSON.stringify(petition)\n    })\n    .then(\n      setDummy(!dummy)\n    )\n  }\n\n  useEffect(() => {\n    const getPetitions = async () => {\n      await fetch(`${API_URL}/petitions`)\n            .then(res => res.json())\n            .then(data => {\n              setPetitions(data.filter(f => f.receiver == localStorage.getItem('id') && f.status == 'pending'))\n            })\n    }\n  \n    const getUser = async () => {\n      await fetch(`${API_URL}/users`)\n            .then(res => res.json())\n            .then(data => {\n              data.map(user => {\n                if(user.id == localStorage.getItem('id')) {\n                  setUser(user)\n                }\n              })\n            })\n    }\n\n    getPetitions()\n    getUser()\n  }, [API_URL, dummy])\n\n  return (\n    <div>\n      {petitions.length > 0 ? (\n        <div className=\"pending-petitions\">\n          <h2>Peticiones pendientes</h2>\n          {petitions.map((petition, i) => {\n            return  <label key={petition.id} className=\"adjacent\" >\n                      <div className=\"\">\n                        {petition.senderName}\n                        <span className=\"d-block small\">\n                          {petition.senderUserName} \n                        </span>\n                      </div>\n                      <div className='petitions-actions'>\n                        <button className=\"petition-action\" onClick={() => declinePetition(petition)}>\n                          Rechazar\n                        </button>\n\n                        <button className=\"petition-action\" onClick={() => acceptPetition(petition, petition.sender)}>\n                          Aceptar\n                        </button>\n                      </div>\n                    </label>\n          })}\n        </div>\n      ) : (\n        <></>\n      )}\n    </div>\n  )\n}\n\nexport default Home"],"mappings":"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"},"metadata":{},"sourceType":"module"}